# NB: Login to Azure Container Registery for dev images: az login && az acr login -n crutvikling --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# NB for images to systest/test/prod use creiddev ACR: az acr login -n creiddev  --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# https://portal.azure.com/#@Nasjonalfelleslosning.onmicrosoft.com/resource/subscriptions/9c0d7873-b8aa-4042-96f8-b8ce5c9888d0/resourceGroups/rg-eid-systest-cr/providers/Microsoft.ContainerRegistry/registries/crutvikling/overview

name: eidas
networks:
  eidas:
    name: eidas
    
services:
  redis:
    image: redis:alpine
    restart: always
    ports:
      - "6400:6379"
    networks:
      - eidas
    command: redis-server --maxmemory-policy allkeys-lru

  eidas-connector:
    build:
      context: .
      dockerfile: docker/dev.Dockerfile
      args:
        GIT_PACKAGE_TOKEN: ${GIT_PACKAGE_TOKEN}
        GIT_PACKAGE_USERNAME: ${GIT_PACKAGE_USERNAME}
    environment:
      - REDIS_HOST=redis
      - REDIS_PORT=6379
      - TRUSTSTORE_PASSWORD=changeit
      - TRUSTSTORE_BASE64=MIIDwgIBAzCCA2wGCSqGSIb3DQEHAaCCA10EggNZMIIDVTCCA1EGCSqGSIb3DQEHBqCCA0IwggM+AgEAMIIDNwYJKoZIhvcNAQcBMGYGCSqGSIb3DQEFDTBZMDgGCSqGSIb3DQEFDDArBBRQ6pkDm2fgo3n7eNrnPJ4UH5Lj6gICJxACASAwDAYIKoZIhvcNAgkFADAdBglghkgBZQMEASoEEK6pm2rh3fBQb4GOgFlB9cyAggLAGZ4NCPGBnp96mvajiLyGjn25iW12Z9IQ3E4eICTTltlpECGk9Tu9mHqUZ9YdzASVzI7Q5FcaxMkX1H51YjZUZ2A1f7c7HVzojulyf9vntCMtjzD1TbnA4A4Ec4Z8YOJhEyzlGU9OH+KFCYoivG73b+sMP/504ogWZSeGFbjrFRX0dw332OsWnOxlQQVHohMMojyjlgYcuex+d8mbNhgaDpwj2SglppdfouTcxDVbl82IJDqJUhox2ctfqWGv2fDk8RB3rygT2gcNSVmhf4KpgbDDipVTVE9xfLqCqEWregdZVW81mYh9L8FN/5ZQo88237CLkCbbXU7xfFQikG/fpAKsTyYCaPFOuvNpeDavc8BY04hkRUii43eBrq4BTZLBcRqOJ+h8sYsntZaENxiUTgAGEgReIPhILNeZxZefvVRxTOqCCFatEJztnC8jhU37rXiPMsFrVVOc/lQ9lyd1A7ODSXMNk/yD/3XOCBl0ZPd637uwqvp5dEi9335huL2pEQkBMSwajXRVuXL9fqJHf1Ud9KzIgwQ6gexiZ4hkVSjStmyjL3426dVm44hvdQR2PppZl90OzoESDbifCYgevZhkL3R/NtjHuy08Rh0XxBn3mP0gto+FlicPUkUo+VECl6p3STAoFT34pkfm12dGK0XYD8gtJN0x98+8R5InBqB3MPUmZ2cwgdeTexsA8BgDgnN4zHg7Lgg5glZcYXH52oyQs1TeazUPPxv+w3m6EAZlFBVZei+Nu6ywjAvpB1YZ36wgOvmlBLtY8xBcupZWqLl8vkm8ZV75A2n2HLi8iy8lsqgp0CDmTldgk327hKpOLCEJUaCeIz8d9qHvG4jqoILvq6ayqdMZTdink7QSOcVOo+kmP0SxhGfi4M+AlCEEkXMrXgU1VikkETgpsnVlb/Bf6bppBtcEAEuF6uQMNA8wTTAxMA0GCWCGSAFlAwQCAQUABCDRKF3YbxSLBcwKXHvjcbQ3TBHXM6STHRW7sd5ROEgOoAQUOhCnsJ8/seTl9LnkZG7+Pbg2dAwCAicQ
      - SIGN_KEYSTORE_PASSWORD=changeit
      - SIGN_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_KEYSTORE_BASE64=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
      - SIGN_METADATA_KEYSTORE_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_BASE64=MIISDgIBAzCCEbgGCSqGSIb3DQEHAaCCEakEghGlMIIRoTCCClgGCSqGSIb3DQEHAaCCCkkEggpFMIIKQTCCCj0GCyqGSIb3DQEMCgECoIIJwDCCCbwwZgYJKoZIhvcNAQUNMFkwOAYJKoZIhvcNAQUMMCsEFGozLAK9Wg9STaXgm3c8F+shZ7d6AgInEAIBIDAMBggqhkiG9w0CCQUAMB0GCWCGSAFlAwQBKgQQTxhHP6DmW7hr4ndyUz1JlASCCVCVSsJ4KLqRDl21E5WzkWl0Tdfu2EPVTUXGQ+7ZpudVvCM3Lb4v23IKO9y0GPiVZX+4u6ej0LHXOQtgvEetiiReH2aefHBjijM7etTQRdAf8az80y02ACEphHllNLUlbyAiJnqfG9yKxd5BALZcoBDDLGty59ADyztCQTgf3NAPeHnzvZoNPM8du/t6sWSkE/3jUAcoDPr0XLphJ91p/sDqzMFYIOEKjnF7Pqfc0OdCHePgDRr6t0AMXLVW1mxiqR+fl9xcFHTrJvaUlKurvaloyE4bTfRw6k3g4XiO0sIJ6SdVHXI3PurJ7O7kwvckGrFHCKkFiKNTaPmFGz5wzmYqDrDr69oXq+fp3ABynmG5TdAfvJzb+sKhCKT1dFsPlUb4L6jgd7Q4d4xwmAwdwJzJ07/i0zdmFnkmDr+FNPkD2+meXm/O+q0Ym7veoAqUHnmkqdNoEdNcbfA/yK0TmvfJkOSqyDN9HxI8GX66FEj8k/O/XivpJh3NanXwZ/KurcJtcD7jnHMutK+c0gcoR6/TL4XhZjb/gTd7ycmBQcF3nHoRF6HWMfCTmdI6XxEcc4igGkFkksGvuwVmpMUksdtz5NfDzb94h+QMOJ243fafk7xw5N46VinzgdWb1KKc/+tXZCgVDY7kqPIwIXd2tDLlOlsRMmzG87i3k6CGEnGG8Q5LQinJVeTPUEvJ+c8Zjl4DEt4P7wuGtgzRhJ81oFlKAVFM4UAp70hxoIWW/Jk9N/nGk7Jia3/5mAqafJgxvmZ+dTO0um2CD7WYZRmANCEL3bNkl3AxoOi7ZX3Y+bsXoebICQuuXEqmz2nh3162f9kKxp9oH8MuhYFq4YZQKQ8JJnYQHuXHXsbgHTmfULTbkBn0K/7UYLnMEW101AzWbUwJ8PSwbq/4iwh37XGV/+IY4O6OAgTeAqgrkyBRmQkBr0oq3DJAUlhblhDIf/hemzirMM4tuKJwgv0HATOMwuGf1rVATcp246G8degu82IaRmp/zzORzWrC7qPwrzf2jtOk98RCmWBo6D0ZjW42V4lGo3DxDZxfnz4xCStz0ms3WKwKMsBBTPOVB4Fz1SVKd83HDtBzKv/6z5KHxDNjbfVQTpUZWdL+wjK3fsb/lU3MfdUJlynQAt7MScS+RL665VIa6UBtc4LQNjfhawYuCcDKdoHYXxD2SryOUicIPIvE4xdFyKvvE3HOyBVQFlCGWCYiEi0XCkA5c7mY3In/GBPWk7om2GJmy/0IZyJ81mYFoZCLL28Zg/Ovs4UGFHMyKAalRW94V71gHFKTVLFCuLBpRbpT2EatT7NSRq6R6f1ieBU4ogR+N+Kxrdky+HRSIsgOmyE7PVNgrcam+Y6YczxeJCK5up2vlBvAB1gv9W4G2BEb5JAMNO3/zI5CAyW0GiL5D8+DRvhx1L9uZAwAavs1TZ60HgqT2S9UCJ4wjvYzDyqQJOnPu5vZ5/28aC0sxPcQxj7PCTyZfG3Ztwip2wTcLdVA1RfOBWO41Px6rGpxV8lTak64g8bAbq+BgIHcEvP1nLLKzteU4Q/rwnvJTUIxKaT0Q1w4IhxBU/azd0TSCjiYGo6f4F7xx54sVPMkLNmM2T9YjxYeuVm2+V356Vb23qDAX5WyWzcJSeicIzV25QPSsVf59GKew0PlpHD+tsJEkGyml/GY0DkDQR+Rf9GUJ4u0WvRMwHXNmMb6jtfjC9ATqDTw9aaV2WBc07BMOes8j170vte9vpjasYWxVb26PZ/n9/iVoI6v5DowESGYsWmgqGuptBgJopNTv9Ga3OJEFWiEC9IRDT/v0oFI/K8CxFgz4jQhJuRAjploq3qLEBjgf+1stTHawQOgDLdwMrvplzIvT580xGHor3vBBOL1MLSUVv7sWNtLs/j+cNA1RDMW57JNTDpaj6kTLQKvxZDlrG7Vx8eNIhEwdiohBbiCN/LbBNGR9Mqr7Ic3iKial0WAziR5TW3yV+e4tWNRGLR6rZDNPOP5Drhx6j49WDWpneSGN3/1TFK/fk7TYGNEdLHkARz2cuSFipyzTFm6aHEWLCzp9OBlp6xkHCo59P1pTpB1XjZcGCeKurygtYeV72mO27LWSLy7stvcWevcff+ncorQvDTsI4x8hoOc0TdTIfnQRX5UONLPR0sDIjubIL+db6bAwb8dpKqyJhKzPgbEeMMUxFtWw6fwPl0xLvoIz5z7aByOUeuji6EQi0QzSVFx3bLDoSP9ljAJ03r+464qwQsh7+U6fUxOdAp52t+vThHwz8DRp18Zjp5sVJus/B0nTRqBI+1ekPvJimyng2bfZFY2Mq560L/H9QxytCmQkzpSoVJZTXJQ9Eq2Zjt6SpJD0NHys584J6xnWG76BnZCXZQY+QHbtbkh6OKhFoN1h2bjmzUY7XRdLsD0BQYVeLudn5m/TrFyiVDma3fPYasX/vd3jZS2IP5KgX/WnshFZxMzPYoHn5sjByDK3mV8r6zSTHs2EXJkbXqIpguVMzJlxjZjBRZHWg3N4ohat4smSt6YX4eRWBU4j6dgbKdah0yecJQ8i+oo4EJdVCoq+KQDdfjIQ6Vq7Hr/l7tsi76vzTIS/Adwovru7ypnNFIuQHXSkTTRqi6R7N18H81MAGQXvdgaTl0Fq1HRirmI7bfChSBI00Sz9K9rX5Q8St/shzUqiSev1VEWDW0l87CKKL5jiW0S0Y7eZuwV2liYf9cf7sCsquwTmFft/Ixn3MeZ2sBuv79PgRfIAA8me3qiXNvPh0UOs6r40QMQzkIyV5kEVgSdOhKlwAK5VhLSdqKproKE9MniC/6VJTChKBAoK9SHWiLQacETJ3S/iseQKoAoWwAL07VTzKachzU7+VFad6pMQUObAC6MLXM8xDfh32xN1ameAI5+rRun4oaBvW7InAJ1mjLQRBzpsqvZ9RGLvDwIU3k7DZXWXew1uqI3PjQi+IMaJ+xJKwwWEt4HcegbU3tPvAHHKGN1L//2aLV0DBcP+hwfMKeDWjOopOygm9DudfO6O1jnIzI24mYs142L+FYIhgxUDLPo8bYNvKsD/j202tEcETQjVuLHFzoCtCPYqkFodb/YSQsCc9j3iGD9M/P4zFJfPwmihuaaflsUlFyNc6p4vqT7H+46l/0SWKnY9n+DydeY1G6+n8b39HV5JUK2RfZ9nTuw5YTllAlwbzFqMEUGCSqGSIb3DQEJFDE4HjYAZQBpAGQAYQBzAC0AbgBvAGQAZQAtAG0AZQB0AGEAZABhAHQAYQAtAHMAeQBzAHQAZQBzAHQwIQYJKoZIhvcNAQkVMRQEElRpbWUgMTcyNDIyMjczODY2MzCCB0EGCSqGSIb3DQEHBqCCBzIwggcuAgEAMIIHJwYJKoZIhvcNAQcBMGYGCSqGSIb3DQEFDTBZMDgGCSqGSIb3DQEFDDArBBTMbhDzfFYvO5GIsoQkjBuhGodCjwICJxACASAwDAYIKoZIhvcNAgkFADAdBglghkgBZQMEASoEEOWOy7613qR/ows5wqJ0ApaAggaw4WbM3jLW9YieKNyzGGzyqixt5GC7dNz41/qNI57gMZPv8fvrflYJuwtEuuCq5uHzJAmqXRQGvvUYBbXl9iM/IzKc/NsAtPS0rjWOLcJ2wL2jWlAjyUo8vnxc3jpFdKH5prbkWGFiKsrddT4P1N1h6Mp6TpamqHgZScTmKFuv3Vr2e94JbOXrM6V1U4HlYkILv31ZJayNSzuTaszEKVAUOy/VJxlcZMuHl3XAmfdz9Mjjqi2AmNvlzWSzG7SX+tHckZZC2c3isnFPCObfC3ETJsj9VX9rYbe+dcHlpjzmZ17GIT7YtV4A1d9jf7e8tMHQDbhJpCT3fWfyBAyywsNMWEkF2qLvoGpJrksv2im+CkFCwMAnsHF8xUbe/OBReVKu7D6EMaebcy2UU4eRYy32qFLLGUh8dwilNF2GTPlcRHG2tMxK4dVRpkPMgysbEztq1ddDlkxLc06GllfBs8g4OStpXknMdtnovdHZO0Me2rZreKnH0rgKC0CfSRv8shO4SEk2AIyBjJXC6BBuV3eExNqfIVkJ8ZAX2oovWnJexXgZlqRPYC07tggtNux8M/nLOJahs/kgTaRTy1gcw/rJJ4ZSlbxKONoX+diuUqjOTODPSrIdgV13/4epFkKHibMfqskcSq04XhjijpQjvs4fLPmLwhk0YfVdV9XdeoZzwKbVU02egcbyF/j149W0vhmGIT0OT+a5DMPY9vPyFxwmW3mmxC19eQtI9QiyANfPMMoNGjRktMxWuPE2a2XsXRLX7DWW6OIG/iCEWg5JfEG16gsjkKNPRLfj7UmVlxV/pduz9ITYACQBOGFEH/XGEDHUbWetBDdyhLAz8L8tTyVemKZ0I/+ybLle/6ydoJxQLZ9cOGxnjmiQBvm9/jdoIXP4hL4bv2B35L9YDH0fKKnvSJA2ecE7mybtf6vHQLEx2+7M/r2ROrLC+lI62wVNnA2n56WOg+WMqhSQstOzo779KFEIYmhnHHdVULUb7vjGDPkAr+PVKW8icrbDL1dbxSXyCNLFUJr4GylnMCCeUQyiOQXBG1kyesS0zo2hfK/PCOj4JgaV6K1gKZ3cOCjJyLTbu3SkIFauR0//lRGiM5hP21uyZ9/3xRH6wM0RtySogSAHXZZHEH6H/J+rp7xRo5fCKpWi5GJ7M+I39u1KhbrFn5L8ZBMsnayVwNz5CWZn5P84JA2SFDFMT9fk8e94qsYfNbO/+xh8IA3Nb+BxUm6fsguDfHnJaHIKsVoyV77QyZ4TFV4p3XigpDHspphIU4KX5zFxkxFRgYTiJZs44DD2xPsXxycWCoziFocZ3bxpOHC0w1zEdJtVKg2I2D7vlauW821RFI1M/zVKoIdgJlxpFGaGAAJG8U/dVHbzIO/9AcopbsG1k6WcF2CYqUFoHOlycXbDlfaBx28SinU15wBZd73MrOVmU53DnWaIGOPphnl70a6JYd7Ur3skJBlLYaOmYC19lEUeonnK7Lqj8Thms2CH+WBXQd4uwDPnwRerx7wVpLoLQT3SEluR1/AGuPBLlZuxsoLUBt2vtPqHkqq/coKkf0JQq6ENCgEuNnHDA6HzTaZaGotoVNBU5QJBs7k6+adNKez3I4vSwsazdzXD5z7nx73WgVFFTyFmVWSmZNxQm8FNfxgFaF2XgLCszbd5j/G1LgEkYLgzZdoNz6WEakm4cY4UBC+9bGuLuHA2glINzP+277UN1gjnXzQxE56zEFVzaerxHXX9pJ+BTy71sC1zyXTFlo1gyorY1d7HXIrhOoOKekqLThFypdIfREzM5CGhU3mOhxWVPYQEBbV4IRI5fpMbEZa3MVJWQ12V1+xOvzdlXLbw2RZdf0uZwACunFlYPEfcC7JexcZ+APkkHUj/XwfczlPrbL38IPEa/dMjWVVwSAiLhSbUOu+OKVCJLusel82YGJ0F8VNGD7FFr0iCkSBXxwNu1ZnW/Sgx7eZd1gS8aY8UDfFQzu8KXBLhZcTU03L+7mG1mtgtcI1LEX3UCNC/96ZhJ5NqAj8JVIbSIGNe5DkbV+JJtacgbd/7Ipt7VAm6UqtOgEHoOyaG19YRh7bRQ/Jd+NAlrPzUFNL83a6JSLOqsUZfgJQbwIQ1eta+Q2W3FQscEhzGI8cRiad9W+9xF3frBk2t90Vq3AfarBAi8WYh0Y6sGnfsDbxVa2lphLxN2TA0lxpgekUVd0BABFEBmcJqdccpjY34mI/TL9Sc2a5Xaio7UgGSmeqgguwCaZNxjBDKbuCVnhO30D4I1agPfvfkzZcyDNcep28wTTAxMA0GCWCGSAFlAwQCAQUABCB4pZR0zBN5tfiLcE4CXMYNSDoONRtY4P6dDCoVeILvNgQUVOzUfQrFsqWxC1HVXNgkRBdqUt4CAicQ
      - ENCRYPT_KEYSTORE_PASSWORD=changeit
      - ENCRYPT_KEYSTORE_KEY_PASSWORD=changeit
      - ENCRYPT_KEYSTORE_BASE64=MIIE5wIBAzCCBKAGCSqGSIb3DQEHAaCCBJEEggSNMIIEiTCCAZ0GCSqGSIb3DQEHAaCCAY4EggGKMIIBhjCCAYIGCyqGSIb3DQEMCgECoIIBDzCCAQswZgYJKoZIhvcNAQUNMFkwOAYJKoZIhvcNAQUMMCsEFBSVnrvkp0hOyF4+/B0sv+t3n6x9AgInEAIBIDAMBggqhkiG9w0CCQUAMB0GCWCGSAFlAwQBKgQQgCrs/v+9QTpcJipjTlYJeQSBoLqu0/BRQz2cBj1IAEKtI5UTRrClYm8pfETG0u7rQ9122D0UZ5bFnd2EzPLosh/YUlnL4YMjnPYwM+osbEAxuuxeHsmS17o4qkQDNSkuwVKcCeuSljY0oIkHldaKy9G4OXRlsUrqVAbgYZCNX1Tt5OT1hMm9qoXuMhwx5I01uYVlhAkhP6lAA00pvlRqjtgomne4bLtjvs9h6KIdz0wyiLAxYDA7BgkqhkiG9w0BCRQxLh4sAGUAaQBkAGEAcwAtAGwAbwBjAGEAbAAtAGUAbgBjAHIAeQBwAHQAaQBvAG4wIQYJKoZIhvcNAQkVMRQEElRpbWUgMTcyNjQ3MTM1MzcxMzCCAuQGCSqGSIb3DQEHBqCCAtUwggLRAgEAMIICygYJKoZIhvcNAQcBMCkGCiqGSIb3DQEMAQYwGwQU1egCC6Op/cdmK24eP0g35pGLSP4CAwDDUICCApAtz3rjnVgEZTThC0yJ6Rc8b4mlMBTJSdaUuO/V+d3zGyzL7TqO8v6+D3XIFftngKMNzA+X6zjb89Z4/+Yi0UNIhVzXVuvNbAh9rW5V3dhbR6nXQwFNiKIvXYAM4gr9HUvPGKw2Z1PlBhIJPxU6UGVLYf6kioKwNoy+YK3Woca/ob0qPHYpt5g+twzv4AkbkKXKiYWQq1ovr3JET/nf+1VqTBdM9bhviijQamzHhZKoCW87Rc4jkUqb+UYoJyN1zGbV2Vwn3qIbaXuqEpVlAUYv/KKmOtNwP/gJoqfJRO/LYsWvlru+GWl6JxrQTAhVxtQvtH/yf/zIg2KcZYqydpkHKEPxlc1KcHWkG+jzNxhjpJkdV9NgZund2+9Fywtn3WLZBRDMLBfB8rOSntusMovoiInjE1LlJshG2tgcUutSPm7uLypX1xq70ZMUa4xAL3UK4oP5tzEAnFOOJW8NZVBjXL4h3RE7BP97p0zVHeeTGSH4VnbYoMALEUvnxr6K8w5iIl6ft68HkrLExKwx57/Lq46c8do0dkrSas86NRb5mKVxtEabLBTMZGYXSZDS5QXzjKUNgL1tw9cyFkTgm1/sPupLRoxGm+yU5/8oFqtzv4Lb3nT5VyPsFU9Oh9jF5F3ySTC4SLR6pQ+qEfimZERguuc3AWome24Tk/2ygNEBWkOELB0aPwTaVU/LfxR2fGlYBtoUI0Ctz5JwnMbYp+LUH5ozA2PGTb+ALy7JW3rfQw9EG8lc52WZS+JQ9DvSjEjzZajYW6R5Ami7/LQ+hXEskFiZbADOHac4FiHjC6GRgfJzi4kdSD9G1gadlh1iF2k4TcFcZG5UpOD8ZhQBj5Yf8RamkUuGdpJ9ZN7PJuxOPDA+MCEwCQYFKw4DAhoFAAQU8QjT6rcfnNsnf/w3dn4xVYrtTioEFOxc8dOtv3OOUR9IGIfaJwF3PQNBAgMBhqA=
      - LIGHT_TOKEN_CONNECTOR_REQUEST_SECRET=mySecretConnectorRequest
      - LIGHT_TOKEN_CONNECTOR_RESPONSE_SECRET=mySecretConnectorResponse
      - ENVIRONMENT=docker
      - CATALINA_OPTS=-Xms512m -Xmx1024m -DredisPassword=$${REDIS_PASSWORD} -DredisPort=$${REDIS_PORT} -DredisHost=$${REDIS_HOST} -DlightTokenConnectorRequestSecret=$${LIGHT_TOKEN_CONNECTOR_REQUEST_SECRET} -DlightTokenConnectorResponseSecret=$${LIGHT_TOKEN_CONNECTOR_RESPONSE_SECRET}
# debug locally on port 8089
#      - CATALINA_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=*:8089 -Xms512m -Xmx1024m -DredisPassword=$${REDIS_PASSWORD} -DredisPort=$${REDIS_PORT} -DredisHost=$${REDIS_HOST} -DlightTokenConnectorRequestSecret=$${LIGHT_TOKEN_CONNECTOR_REQUEST_SECRET} -DlightTokenConnectorResponseSecret=$${LIGHT_TOKEN_CONNECTOR_RESPONSE_SECRET}
    ports:
      - "8083:8083"
 #     - "8089:8089"
    healthcheck:
      test: wget --no-verbose --tries=1 http://eidas-connector:8083/ConnectorMetadata || exit 1
      interval: 5s
      start_period: 8s
      timeout: 5s
      retries: 20
    networks:
      - eidas
    entrypoint: "/bin/bash -c"
    command:
      - |
        cd /usr/local/tomcat
        ./bin/addEnvironmentSpesificConfigFiles.sh
        ./bin/updateKeyStoreConfig.sh
        ./bin/catalina.sh run


